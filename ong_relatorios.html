<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOS Felino - Relatórios</title>
    
    <!-- Folhas de estilo -->
    <link rel="stylesheet" href="CSS/ong.css">
    <link rel="stylesheet" href="CSS/ong_relatorios.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>

<body>
    <!-- CABEÇALHO -->
    <header>
        <div class="container">
            <div class="top-header">
                <div class="logo">
                    <img src="IMG/reuse-logo-(1).svg" alt="ReUse Logo">
                </div>
                <div class="user-actions">
                    <a href="login.html"><i class="fas fa-sign-out-alt"></i> Sair</a>
                </div>
            </div>
        </div>
    </header>

    <!-- DASHBOARD PRINCIPAL -->
    <div class="dashboard-container">
        <!-- Menu Lateral -->
        <aside class="sidebar">
            <h2 class="sidebar-title">SOS Felino</h2>
            <ul class="sidebar-nav">
                <li><a href="ong.html"><i class="bi bi-house"></i> Início</a></li>
                <li><a href="ong_doacoes.html"><i class="bi bi-handbag"></i> Doações</a></li>
                <li><a href="ong_doacoes_necessarias.html"><i class="bi bi-clipboard-check"></i> Doações Necessárias</a></li>
                <li><a href="ong_beneficiarios.html"><i class="bi bi-people"></i> Beneficiários</a></li>
                <li><a href="ong_relatorios.html"><i class="bi bi-bar-chart"></i> Relatórios</a></li>
                <li><a href="ong_configuracoes.html" class="active"><i class="bi bi-gear"></i> Configurações</a></li>
                <li><a href="ong_contato.html"><i class="bi bi-envelope"></i> Contato</a></li>
                <li><a href="ong_produto.html"><i class="bi bi-box-seam"></i> Produtos</a></li>
            </ul>
        </aside>

        <!-- Conteúdo Principal -->
        <main class="main-content">
            <!-- Breadcrumbs -->
            <div class="breadcrumbs-vendedor">
                <a href="ong.html">Painel da Instituição</a> &gt; <span id="current-breadcrumb">Relatórios</span>
            </div>
            
            <h1>Relatórios</h1>
            
            <!-- Filtros -->
            <div class="filters-container">
                <div class="filter-group">
                    <label for="periodo">Período:</label>
                    <select id="periodo">
                        <option value="7">Últimos 7 dias</option>
                        <option value="30" selected>Últimos 30 dias</option>
                        <option value="90">Últimos 3 meses</option>
                        <option value="365">Último ano</option>
                        <option value="custom">Personalizado</option>
                    </select>
                </div>
                
                <div class="filter-group custom-date" style="display: none;">
                    <label for="data-inicio">De:</label>
                    <input type="date" id="data-inicio">
                    
                    <label for="data-fim">Até:</label>
                    <input type="date" id="data-fim">
                </div>
                
                <div class="filter-group">
                    <label for="tipo-relatorio">Tipo de Relatório:</label>
                    <select id="tipo-relatorio">
                        <option value="doacoes" selected>Doações</option>
                        <option value="distribuicao">Distribuição</option>
                        <option value="categorias">Categorias de Itens</option>
                        <option value="doadores">Principais Doadores</option>
                    </select>
                </div>
                
                <button class="primary-button" id="gerar-relatorio">
                    <i class="fas fa-filter"></i> Aplicar Filtros
                </button>
                
                <div class="export-buttons">
    <button id="exportar-pdf" class="btn-export">
        <i class="fas fa-file-pdf"></i> Exportar PDF
    </button>
    <button id="exportar-excel" class="btn-export">
        <i class="fas fa-file-excel"></i> Exportar Excel
    </button>
</div>
            </div>
            
            <!-- Indicador de carregamento -->
            <div class="loading" id="loading-indicator">
                <div class="loading-spinner"></div>
                <p>Gerando relatório...</p>
            </div>
            
            <!-- Gráficos e Estatísticas -->
            <div class="charts-container" id="charts-container">
                <div class="chart-row">
                    <div class="chart-card">
                        <h3>Doações Recebidas por Mês</h3>
                        <canvas id="doacoesChart"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <h3>Itens por Categoria</h3>
                        <canvas id="categoriasChart"></canvas>
                    </div>
                </div>
                
                <div class="chart-row">
                    <div class="chart-card">
                        <h3>Distribuição por Beneficiários</h3>
                        <canvas id="beneficiariosChart"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <h3>Evolução de Itens Distribuídos</h3>
                        <canvas id="distribuicaoChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Tabela de Dados Detalhados - MELHORADA -->
            <div class="section-container" id="tabela-container">
                <h2 class="section-title">Detalhamento de Doações</h2>
                <div class="table-responsive">
                    <table class="data-table" id="detalhamento-table">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Doador</th>
                                <th>Categoria</th>
                                <th>Item</th>
                                <th>Quantidade</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <!-- Os dados serão preenchidos via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination" id="pagination-controls">
                    <button class="pagination-button" id="prev-page" disabled><i class="fas fa-chevron-left"></i></button>
                    <div id="page-numbers"></div>
                    <button class="pagination-button" id="next-page"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
            
            <!-- Resumo Estatístico - MELHORADO -->
            <div class="stats-summary" id="resumo-container">
                <h2 class="section-title">Resumo Estatístico</h2>
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="summary-value" id="total-doacoes">0</div>
                        <div class="summary-label">Total de Doações</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="total-itens">0</div>
                        <div class="summary-label">Itens Recebidos</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="itens-distribuidos">0</div>
                        <div class="summary-label">Itens Distribuídos</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="taxa-distribuicao">0%</div>
                        <div class="summary-label">Taxa de Distribuição</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- RODAPÉ -->
    <footer>
        <div class="container">
            <p>&copy; 2025 SOS Felino - Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Scripts JavaScript -->
    <script src="JS/ong_relatorios.js"></script>
    <!-- jsPDF para exportação em PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</body>
</html>